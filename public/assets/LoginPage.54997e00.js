import{Q as w}from"./QSpace.aef0c2f4.js";import{_ as C,d as $,r as u,v as P,u as Q,y as z,m as b,n as q,p as t,j as o,A as m,aK as x,Q as d,b5 as j,F as h,q as B,aL as U,aG as A,E}from"./index.87951f32.js";import{api as c}from"./axios.f281c5ac.js";import{u as N}from"./use-quasar.e420d68e.js";import"./axios.550fcdad.js";const I=$({name:"IndexPage",components:{},setup(){const s=u(!1),e=u(!0),f=u(!1),g=u(""),V=u(""),n=u({email:"",password:""}),a=N(),l=P(),k=Q();return{login:async r=>{var y,i;try{a.loading.show();let p="";r&&(n.value.email=g.value,n.value.password=r,p="?reset=true");const v=await c.post("/api/login"+p,n.value);k.setAuth(v.data.user,v.data.token),a.notify({type:"positive",message:v.data.message}),r?l.push("/reset_password"):l.push("/adminview")}catch(p){const v=p;a.notify({type:"negative",message:(i=(y=v.response)==null?void 0:y.data)==null?void 0:i.message})}finally{a.loading.hide()}},auth:n,passwordtype:e,forgot:()=>{s.value=!0,g.value="",V.value="",e.value=!0,f.value=!1,n.value={email:"",password:""}},dialog:s,forgetemail:g,sendmail:async()=>{var r,y;try{a.loading.show();const i=await c.post("/api/forgotPassword",{email:g.value});f.value=!0,a.notify({type:"positive",message:i.data.message}),l.push("/adminview")}catch(i){const p=i;a.notify({type:"negative",message:(y=(r=p.response)==null?void 0:r.data)==null?void 0:y.message})}finally{a.loading.hide()}},inputPassword:f,forgotpassword:V}}}),S={class:"row q-mt-xl"},F={class:"col-3 shadow-1 q-mt-xl q-py-md rounded-borders bg-blue-1"},H={class:"row q-px-md q-py-xl"},L={class:"logo-text b",style:{zoom:"1.5"}},Z={class:"row q-px-xl"},D={class:"row q-px-xl"},G={class:"row bg-blue-1"},K={class:"row q-pt-md q-px-xl"},R={key:0,class:"row q-pt-md q-px-sm q-mx-xl q-mt-xs q-pb-sm bg-red-2",style:{"border-radius":"4px",border:"1px solid red"}},T={class:"col-12 q-mb-xs"},J={key:1,class:"row q-mb-md q-px-xl q-pb-md"},M={key:2,class:"row q-mb-md q-px-xl q-pb-md"};function O(s,e,f,g,V,n){const a=z("center");return b(),q(h,null,[t("div",S,[o(w),t("div",F,[t("div",H,[o(w),t("div",L,[e[13]||(e[13]=t("img",{src:"/img/poziom3.png",style:{width:"11vw"},class:"desktop-nav q-pb-xs"},null,-1)),e[14]||(e[14]=t("br",null,null,-1)),o(a,{class:"text-grey-6"},{default:m(()=>[...e[12]||(e[12]=[B("Panel Administracyjny",-1)])]),_:1})]),o(w)]),t("div",Z,[o(x,{modelValue:s.auth.email,"onUpdate:modelValue":e[0]||(e[0]=l=>s.auth.email=l),outlined:"",dense:"",label:"Email",class:"col-12 q-mb-xs bg-blue-1 rounded-borders"},null,8,["modelValue"]),o(x,{modelValue:s.auth.password,"onUpdate:modelValue":e[2]||(e[2]=l=>s.auth.password=l),outlined:"",type:s.passwordtype?"password":"text",dense:"",label:"Has\u0142o",class:"col-12 bg-blue-1 rounded-borders"},{append:m(()=>[o(d,{dense:"",flat:"",unelevated:"",round:"",onClick:e[1]||(e[1]=l=>s.passwordtype=!s.passwordtype),icon:s.passwordtype?"visibility_off":"visibility"},null,8,["icon"])]),_:1},8,["modelValue","type"]),o(d,{onClick:e[3]||(e[3]=l=>s.login(null)),unelevated:"",class:"bg-primary col-12 q-mt-md q-px-xl text-white",label:"Zaloguj"})]),t("div",D,[o(d,{onClick:e[4]||(e[4]=l=>s.forgot()),unelevated:"",flat:"",class:"col-12 q-mt-sm q-px-xl text-primary",label:"Przypomni has\u0142o",style:{border:"1px solid #1976d2"}})])]),o(w)]),o(j,{persistent:"",modelValue:s.dialog,"onUpdate:modelValue":e[11]||(e[11]=l=>s.dialog=l)},{default:m(()=>[o(U,{class:"bg-white",style:{width:"400px"}},{default:m(()=>[t("div",G,[o(w),o(d,{icon:"close",round:"",class:"text-grey-6",flat:"",dense:"",onClick:e[5]||(e[5]=l=>s.dialog=!1)})]),e[16]||(e[16]=t("div",{class:"row q-px-xl q-pt-md q-ml-sm"}," Podaj adres email po\u0142\u0105czony z twoim kontem ",-1)),t("div",K,[o(x,{modelValue:s.forgetemail,"onUpdate:modelValue":e[6]||(e[6]=l=>s.forgetemail=l),outlined:"",dense:"",label:"Email",class:"col-12 rounded-borders"},null,8,["modelValue"])]),s.inputPassword?(b(),q("div",R,[t("div",T,[o(a,null,{default:m(()=>[o(A,{color:"red-6",size:"sm",class:"q-mr-sm",name:"warning"}),e[15]||(e[15]=t("span",{class:"text-red-6 text-strong"},"Podaj kod z wiadomo\u015Bci email poni\u017Cej",-1))]),_:1})]),o(x,{modelValue:s.forgotpassword,"onUpdate:modelValue":e[8]||(e[8]=l=>s.forgotpassword=l),outlined:"",type:s.passwordtype?"password":"text",dense:"",label:"Has\u0142o",class:"col-12 bg-white rounded-borders"},{append:m(()=>[o(d,{dense:"",flat:"",unelevated:"",round:"",onClick:e[7]||(e[7]=l=>s.passwordtype=!s.passwordtype),icon:s.passwordtype?"visibility_off":"visibility"},null,8,["icon"])]),_:1},8,["modelValue","type"])])):E("",!0),s.inputPassword?(b(),q("div",M,[o(d,{onClick:e[10]||(e[10]=l=>s.login(s.forgotpassword)),unelevated:"",flat:"",class:"col-12 q-mt-sm q-px-xl text-primary",label:"Zaloguj si\u0119",style:{border:"1px solid #1976d2"}})])):(b(),q("div",J,[o(d,{onClick:e[9]||(e[9]=l=>s.sendmail()),unelevated:"",flat:"",class:"col-12 q-mt-sm q-px-xl text-primary",label:"Przypomni has\u0142o",style:{border:"1px solid #1976d2"}})]))]),_:1})]),_:1},8,["modelValue"])],64)}var te=C(I,[["render",O]]);export{te as default};
