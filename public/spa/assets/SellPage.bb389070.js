import{am as ce,Y as E,aj as de,an as me,S as O,ao as W,a9 as Z,M as K,V as Y,a4 as ve,r as Q,c as f,w as G,g as se,h as y,ae as pe,bd as fe,G as H,be as ge,E as re,H as he,J as be,o as ue,U as ye,ar as xe,bf as Pe,Q as A,ay as we,_ as Ce,d as qe,ax as ke,m as j,z as X,A as k,p,q as R,j as m,aJ as J,bg as Se,aK as ee,t as $,aL as te,C as _e,n as oe,aI as Ie,F as Te,aF as Ve,b4 as $e}from"./index.b8710c52.js";import{u as De,a as Qe,b as Ae,Q as Be,c as ae}from"./use-fullscreen.b4f9cbe6.js";import{Q as ze,a as Le}from"./QTable.6f1f4f66.js";import{Q as Ne}from"./QSpace.b7b0ce96.js";import{g as ne,s as le}from"./touch.9135741d.js";import{c as Ee}from"./format.539311cb.js";import{Q as je}from"./QPage.ac97dd15.js";import{C as Fe}from"./ClosePopup.51f8e027.js";import{u as Me}from"./use-quasar.4866a177.js";import{api as Ue}from"./axios.ab84e6ae.js";import"./QItem.f8c3c5e4.js";import"./QMenu.030c5c67.js";import"./QList.e7781e96.js";import"./axios.550fcdad.js";function Oe(e){const o=[.06,6,50];return typeof e=="string"&&e.length&&e.split(":").forEach((l,g)=>{const i=parseFloat(l);i&&(o[g]=i)}),o}var Re=ce({name:"touch-swipe",beforeMount(e,{value:o,arg:l,modifiers:g}){if(g.mouse!==!0&&E.has.touch!==!0)return;const i=g.mouseCapture===!0?"Capture":"",t={handler:o,sensitivity:Oe(l),direction:ne(g),noop:de,mouseStart(a){le(a,t)&&me(a)&&(O(t,"temp",[[document,"mousemove","move",`notPassive${i}`],[document,"mouseup","end","notPassiveCapture"]]),t.start(a,!0))},touchStart(a){if(le(a,t)){const u=a.target;O(t,"temp",[[u,"touchmove","move","notPassiveCapture"],[u,"touchcancel","end","notPassiveCapture"],[u,"touchend","end","notPassiveCapture"]]),t.start(a)}},start(a,u){E.is.firefox===!0&&W(e,!0);const d=Z(a);t.event={x:d.left,y:d.top,time:Date.now(),mouse:u===!0,dir:!1}},move(a){if(t.event===void 0)return;if(t.event.dir!==!1){K(a);return}const u=Date.now()-t.event.time;if(u===0)return;const d=Z(a),h=d.left-t.event.x,s=Math.abs(h),P=d.top-t.event.y,r=Math.abs(P);if(t.event.mouse!==!0){if(s<t.sensitivity[1]&&r<t.sensitivity[1]){t.end(a);return}}else if(window.getSelection().toString()!==""){t.end(a);return}else if(s<t.sensitivity[2]&&r<t.sensitivity[2])return;const b=s/u,w=r/u;t.direction.vertical===!0&&s<r&&s<100&&w>t.sensitivity[0]&&(t.event.dir=P<0?"up":"down"),t.direction.horizontal===!0&&s>r&&r<100&&b>t.sensitivity[0]&&(t.event.dir=h<0?"left":"right"),t.direction.up===!0&&s<r&&P<0&&s<100&&w>t.sensitivity[0]&&(t.event.dir="up"),t.direction.down===!0&&s<r&&P>0&&s<100&&w>t.sensitivity[0]&&(t.event.dir="down"),t.direction.left===!0&&s>r&&h<0&&r<100&&b>t.sensitivity[0]&&(t.event.dir="left"),t.direction.right===!0&&s>r&&h>0&&r<100&&b>t.sensitivity[0]&&(t.event.dir="right"),t.event.dir!==!1?(K(a),t.event.mouse===!0&&(document.body.classList.add("no-pointer-events--children"),document.body.classList.add("non-selectable"),Ee(),t.styleCleanup=S=>{t.styleCleanup=void 0,document.body.classList.remove("non-selectable");const q=()=>{document.body.classList.remove("no-pointer-events--children")};S===!0?setTimeout(q,50):q()}),t.handler({evt:a,touch:t.event.mouse!==!0,mouse:t.event.mouse,direction:t.event.dir,duration:u,distance:{x:s,y:r}})):t.end(a)},end(a){var u;t.event!==void 0&&(Y(t,"temp"),E.is.firefox===!0&&W(e,!1),(u=t.styleCleanup)==null||u.call(t,!0),a!==void 0&&t.event.dir!==!1&&K(a),t.event=void 0)}};if(e.__qtouchswipe=t,g.mouse===!0){const a=g.mouseCapture===!0||g.mousecapture===!0?"Capture":"";O(t,"main",[[e,"mousedown","mouseStart",`passive${a}`]])}E.has.touch===!0&&O(t,"main",[[e,"touchstart","touchStart",`passive${g.capture===!0?"Capture":""}`],[e,"touchmove","noop","notPassiveCapture"]])},updated(e,o){const l=e.__qtouchswipe;l!==void 0&&(o.oldValue!==o.value&&(typeof o.value!="function"&&l.end(),l.handler=o.value),l.direction=ne(o.modifiers))},beforeUnmount(e){var l;const o=e.__qtouchswipe;o!==void 0&&(Y(o,"main"),Y(o,"temp"),E.is.firefox===!0&&W(e,!1),(l=o.styleCleanup)==null||l.call(o),delete e.__qtouchswipe)}});function We(){let e=Object.create(null);return{getCache:(o,l)=>e[o]===void 0?e[o]=typeof l=="function"?l():l:e[o],setCache(o,l){e[o]=l},hasCache(o){return Object.hasOwnProperty.call(e,o)},clearCache(o){o!==void 0?delete e[o]:e=Object.create(null)}}}const Ke={name:{required:!0},disable:Boolean},ie={setup(e,{slots:o}){return()=>y("div",{class:"q-panel scroll",role:"tabpanel"},H(o.default))}},Ye={modelValue:{required:!0},animated:Boolean,infinite:Boolean,swipeable:Boolean,vertical:Boolean,transitionPrev:String,transitionNext:String,transitionDuration:{type:[String,Number],default:300},keepAlive:Boolean,keepAliveInclude:[String,Array,RegExp],keepAliveExclude:[String,Array,RegExp],keepAliveMax:Number},Xe=["update:modelValue","beforeTransition","transition"];function Je(){const{props:e,emit:o,proxy:l}=se(),{getCache:g}=We(),{registerTimeout:i}=ve();let t,a;const u=Q(null),d={value:null};function h(n){const c=e.vertical===!0?"up":"left";_((l.$q.lang.rtl===!0?-1:1)*(n.direction===c?1:-1))}const s=f(()=>[[Re,h,void 0,{horizontal:e.vertical!==!0,vertical:e.vertical,mouse:!0}]]),P=f(()=>e.transitionPrev||`slide-${e.vertical===!0?"down":"right"}`),r=f(()=>e.transitionNext||`slide-${e.vertical===!0?"up":"left"}`),b=f(()=>`--q-transition-duration: ${e.transitionDuration}ms`),w=f(()=>typeof e.modelValue=="string"||typeof e.modelValue=="number"?e.modelValue:String(e.modelValue)),S=f(()=>({include:e.keepAliveInclude,exclude:e.keepAliveExclude,max:e.keepAliveMax})),q=f(()=>e.keepAliveInclude!==void 0||e.keepAliveExclude!==void 0);G(()=>e.modelValue,(n,c)=>{const C=T(n)===!0?z(n):-1;a!==!0&&D(C===-1?0:C<z(c)?-1:1),d.value!==C&&(d.value=C,o("beforeTransition",n,c),i(()=>{o("transition",n,c)},e.transitionDuration))});function I(){_(1)}function F(){_(-1)}function B(n){o("update:modelValue",n)}function T(n){return n!=null&&n!==""}function z(n){return t.findIndex(c=>c.props.name===n&&c.props.disable!==""&&c.props.disable!==!0)}function L(){return t.filter(n=>n.props.disable!==""&&n.props.disable!==!0)}function D(n){const c=n!==0&&e.animated===!0&&d.value!==-1?"q-transition--"+(n===-1?P.value:r.value):null;u.value!==c&&(u.value=c)}function _(n,c=d.value){let C=c+n;for(;C!==-1&&C<t.length;){const U=t[C];if(U!==void 0&&U.props.disable!==""&&U.props.disable!==!0){D(n),a=!0,o("update:modelValue",U.props.name),setTimeout(()=>{a=!1});return}C+=n}e.infinite===!0&&t.length!==0&&c!==-1&&c!==t.length&&_(n,n===-1?t.length:-1)}function M(){const n=z(e.modelValue);return d.value!==n&&(d.value=n),!0}function v(){const n=T(e.modelValue)===!0&&M()&&t[d.value];return e.keepAlive===!0?[y(ge,S.value,[y(q.value===!0?g(w.value,()=>({...ie,name:w.value})):ie,{key:w.value,style:b.value},()=>n)])]:[y("div",{class:"q-panel scroll",style:b.value,key:w.value,role:"tabpanel"},[n])]}function V(){if(t.length!==0)return e.animated===!0?[y(pe,{name:u.value},v)]:v()}function N(n){return t=fe(H(n.default,[])).filter(c=>c.props!==null&&c.props.slot===void 0&&T(c.props.name)===!0),t.length}function x(){return t}return Object.assign(l,{next:I,previous:F,goTo:B}),{panelIndex:d,panelDirectives:s,updatePanelsList:N,updatePanelIndex:M,getPanelContent:V,getEnabledPanels:L,getPanels:x,isValidPanelName:T,keepAliveProps:S,needsUniqueKeepAliveWrapper:q,goToPanelByOffset:_,goToPanel:B,nextPanel:I,previousPanel:F}}var Ge=re({name:"QCarouselSlide",props:{...Ke,imgSrc:String},setup(e,{slots:o}){const l=f(()=>e.imgSrc?{backgroundImage:`url("${e.imgSrc}")`}:{});return()=>y("div",{class:"q-carousel__slide",style:l.value},H(o.default))}});const He=["top","right","bottom","left"],Ze=["regular","flat","outline","push","unelevated"];var et=re({name:"QCarousel",props:{...he,...Ye,...De,transitionPrev:{type:String,default:"fade"},transitionNext:{type:String,default:"fade"},height:String,padding:Boolean,controlColor:String,controlTextColor:String,controlType:{type:String,validator:e=>Ze.includes(e),default:"flat"},autoplay:[Number,Boolean],arrows:Boolean,prevIcon:String,nextIcon:String,navigation:Boolean,navigationPosition:{type:String,validator:e=>He.includes(e)},navigationIcon:String,navigationActiveIcon:String,thumbnails:Boolean},emits:[...Qe,...Xe],setup(e,{slots:o}){const{proxy:{$q:l}}=se(),g=be(e,l);let i=null,t;const{updatePanelsList:a,getPanelContent:u,panelDirectives:d,goToPanel:h,previousPanel:s,nextPanel:P,getEnabledPanels:r,panelIndex:b}=Je(),{inFullscreen:w}=Ae(),S=f(()=>w.value!==!0&&e.height!==void 0?{height:e.height}:{}),q=f(()=>e.vertical===!0?"vertical":"horizontal"),I=f(()=>e.navigationPosition||(e.vertical===!0?"right":"bottom")),F=f(()=>`q-carousel q-panel-parent q-carousel--with${e.padding===!0?"":"out"}-padding`+(w.value===!0?" fullscreen":"")+(g.value===!0?" q-carousel--dark q-dark":"")+(e.arrows===!0?` q-carousel--arrows-${q.value}`:"")+(e.navigation===!0?` q-carousel--navigation-${I.value}`:"")),B=f(()=>{const v=[e.prevIcon||l.iconSet.carousel[e.vertical===!0?"up":"left"],e.nextIcon||l.iconSet.carousel[e.vertical===!0?"down":"right"]];return e.vertical===!1&&l.lang.rtl===!0?v.reverse():v}),T=f(()=>e.navigationIcon||l.iconSet.carousel.navigationIcon),z=f(()=>e.navigationActiveIcon||T.value),L=f(()=>({color:e.controlColor,textColor:e.controlTextColor,round:!0,[e.controlType]:!0,dense:!0}));G(()=>e.modelValue,()=>{e.autoplay&&D()}),G(()=>e.autoplay,v=>{v?D():i!==null&&(clearTimeout(i),i=null)});function D(){const v=Pe(e.autoplay)===!0?Math.abs(e.autoplay):5e3;i!==null&&clearTimeout(i),i=setTimeout(()=>{i=null,v>=0?P():s()},v)}ue(()=>{e.autoplay&&D()}),ye(()=>{i!==null&&clearTimeout(i)});function _(v,V){return y("div",{class:`q-carousel__control q-carousel__navigation no-wrap absolute flex q-carousel__navigation--${v} q-carousel__navigation--${I.value}`+(e.controlColor!==void 0?` text-${e.controlColor}`:"")},[y("div",{class:"q-carousel__navigation-inner flex flex-center no-wrap"},r().map(V))])}function M(){const v=[];if(e.navigation===!0){const V=o["navigation-icon"]!==void 0?o["navigation-icon"]:x=>y(A,{key:"nav"+x.name,class:`q-carousel__navigation-icon q-carousel__navigation-icon--${x.active===!0?"":"in"}active`,...x.btnProps,onClick:x.onClick}),N=t-1;v.push(_("buttons",(x,n)=>{const c=x.props.name,C=b.value===n;return V({index:n,maxIndex:N,name:c,active:C,btnProps:{icon:C===!0?z.value:T.value,size:"sm",...L.value},onClick:()=>{h(c)}})}))}else if(e.thumbnails===!0){const V=e.controlColor!==void 0?` text-${e.controlColor}`:"";v.push(_("thumbnails",N=>{const x=N.props;return y("img",{key:"tmb#"+x.name,class:`q-carousel__thumbnail q-carousel__thumbnail--${x.name===e.modelValue?"":"in"}active`+V,src:x.imgSrc||x["img-src"],onClick:()=>{h(x.name)}})}))}return e.arrows===!0&&b.value>=0&&((e.infinite===!0||b.value>0)&&v.push(y("div",{key:"prev",class:`q-carousel__control q-carousel__arrow q-carousel__prev-arrow q-carousel__prev-arrow--${q.value} absolute flex flex-center`},[y(A,{icon:B.value[0],...L.value,onClick:s})])),(e.infinite===!0||b.value<t-1)&&v.push(y("div",{key:"next",class:`q-carousel__control q-carousel__arrow q-carousel__next-arrow q-carousel__next-arrow--${q.value} absolute flex flex-center`},[y(A,{icon:B.value[1],...L.value,onClick:P})]))),we(o.control,v)}return()=>(t=a(o),y("div",{class:F.value,style:S.value},[xe("div",{class:"q-carousel__slides-container"},u(),"sl-cont",e.swipeable,()=>d.value)].concat(M())))}});const tt=qe({name:"PropertiesPage",setup(){const e=Me(),o=Q(!1),l=Q([]),g=async()=>{o.value=!0,e.loading.show();try{const r=await Ue.get("/api/products",{withCredentials:!0});l.value=r.data}catch(r){e.notify({color:"negative",message:"B\u0142\u0105d podczas pobierania ofert",icon:"error"}),console.error("API Error:",r)}finally{o.value=!1,e.loading.hide()}};ue(()=>{g()});const i=ke({search:"",type:"Wszystkie",maxPrice:1e6,date:"",hasPhotos:!1}),t=f(()=>l.value.filter(r=>{const b=r.title.toLowerCase().includes(i.search.toLowerCase())||r.location.toLowerCase().includes(i.search.toLowerCase()),w=i.type==="Wszystkie"||r.type===i.type,S=r.cost<=(i.maxPrice||1/0),q=!i.date||r.date>=i.date,I=!i.hasPhotos||r.photos.length>0;return b&&w&&S&&q&&I})),a=[{name:"title",label:"Tytu\u0142",field:"title",align:"left",sortable:!0},{name:"location",label:"Lokalizacja",field:"location",align:"left",sortable:!0},{name:"cost",label:"Cena",field:"cost",align:"right",sortable:!0},{name:"type",label:"Typ",field:"type",align:"center"},{name:"date",label:"Dodano",field:"date",align:"right",sortable:!0}],u=Q(!1),d=Q(null),h=Q(0);return{filters:i,properties:l,filteredRows:t,columns:a,detailsOpen:u,selectedItem:d,slide:h,openDetails:(r,b)=>{d.value=b,h.value=0,u.value=!0},resetFilters:()=>{i.search="",i.type="Wszystkie",i.maxPrice=1e6,i.date="",i.hasPhotos=!1}}}}),ot={class:"container q-mx-auto"},at={class:"row q-col-gutter-xl"},nt={class:"col-12 col-md-3"},lt={class:"col-12 col-md-9"},it={class:"text-h5 text-emerald text-weight-bolder"},st={class:"row q-col-gutter-md"},rt={class:"col-12 col-md-7"},ut={key:1,class:"no-photo-placeholder flex flex-center rounded-20"},ct={class:"col-12 col-md-5"},dt={class:"text-subtitle1 text-terracotta text-weight-bold"},mt={class:"text-h4 text-emerald text-weight-bold q-mb-md"},vt={class:"text-body1 text-emerald-grey q-mt-lg"};function pt(e,o,l,g,i,t){return j(),X(je,{class:"bg-sand q-px-xl q-pt-xl"},{default:k(()=>[p("div",ot,[o[12]||(o[12]=p("h1",{class:"text-h3 text-emerald text-weight-bolder q-mb-xl"},[R(" Katalog "),p("span",{class:"text-terracotta italic"},"Nieruchomo\u015Bci")],-1)),p("div",at,[p("div",nt,[m(ee,{flat:"",class:"bg-white q-pa-lg rounded-20 border-light sticky-filters"},{default:k(()=>[o[8]||(o[8]=p("div",{class:"text-h6 text-emerald text-weight-bold q-mb-md"}," Filtruj ofert\u0119 ",-1)),m(J,{modelValue:e.filters.search,"onUpdate:modelValue":o[0]||(o[0]=a=>e.filters.search=a),label:"Szukaj...",dense:"",borderless:"",class:"input-minimal q-mb-md"},null,8,["modelValue"]),o[9]||(o[9]=p("div",{class:"text-caption text-weight-bold text-terracotta q-mb-xs"}," Typ obiektu ",-1)),m(Be,{modelValue:e.filters.type,"onUpdate:modelValue":o[1]||(o[1]=a=>e.filters.type=a),options:["Wszystkie","Mieszkanie","Dom","Dzia\u0142ka","Udzia\u0142y"],dense:"",borderless:"",class:"input-minimal q-mb-md"},null,8,["modelValue"]),o[10]||(o[10]=p("div",{class:"text-caption text-weight-bold text-terracotta q-mb-xs"}," Cena do (PLN) ",-1)),m(J,{modelValue:e.filters.maxPrice,"onUpdate:modelValue":o[2]||(o[2]=a=>e.filters.maxPrice=a),modelModifiers:{number:!0},type:"number",dense:"",borderless:"",class:"input-minimal q-mb-md"},null,8,["modelValue"]),o[11]||(o[11]=p("div",{class:"text-caption text-weight-bold text-terracotta q-mb-xs"}," Data dodania ",-1)),m(J,{modelValue:e.filters.date,"onUpdate:modelValue":o[3]||(o[3]=a=>e.filters.date=a),type:"date",dense:"",borderless:"",class:"input-minimal q-mb-md"},null,8,["modelValue"]),m(Se,{modelValue:e.filters.hasPhotos,"onUpdate:modelValue":o[4]||(o[4]=a=>e.filters.hasPhotos=a),label:"Tylko ze zdj\u0119ciami",color:"emerald","keep-color":""},null,8,["modelValue"]),m(A,{label:"Resetuj filtry",flat:"",color:"emerald",class:"full-width q-mt-md",onClick:e.resetFilters},null,8,["onClick"])]),_:1})]),p("div",lt,[m(Le,{flat:"",bordered:"",rows:e.filteredRows,columns:e.columns,"row-key":"id",class:"properties-table rounded-20 bg-white",onRowClick:e.openDetails},{"body-cell-cost":k(a=>[m(ze,{props:a,class:"text-weight-bold text-emerald"},{default:k(()=>[R($(a.value.toLocaleString())+" PLN ",1)]),_:2},1032,["props"])]),_:1},8,["rows","columns","onRowClick"])])])]),m($e,{modelValue:e.detailsOpen,"onUpdate:modelValue":o[7]||(o[7]=a=>e.detailsOpen=a),"backdrop-filter":"blur(4px)"},{default:k(()=>[m(ee,{class:"dialog-card rounded-20 bg-sand",style:{width:"900px","max-width":"95vw"}},{default:k(()=>[m(te,{class:"row items-center q-pb-none"},{default:k(()=>{var a;return[p("div",it,$((a=e.selectedItem)==null?void 0:a.title),1),m(Ne),_e(m(A,{icon:"close",flat:"",round:"",dense:"",color:"emerald"},null,512),[[Fe]])]}),_:1}),m(te,{class:"q-pa-md"},{default:k(()=>{var a,u,d,h;return[p("div",st,[p("div",rt,[(a=e.selectedItem)!=null&&a.photos.length?(j(),X(et,{key:0,animated:"",modelValue:e.slide,"onUpdate:modelValue":o[5]||(o[5]=s=>e.slide=s),arrows:"",navigation:"",infinite:"",class:"rounded-20 shadow-xl",height:"350px"},{default:k(()=>[(j(!0),oe(Te,null,Ie(e.selectedItem.photos,(s,P)=>(j(),X(Ge,{key:P,name:P,"img-src":"http://localhost:8000/storage/"+s},null,8,["name","img-src"]))),128))]),_:1},8,["modelValue"])):(j(),oe("div",ut,[m(Ve,{name:"image_not_supported",size:"xl",color:"grey-4"})]))]),p("div",ct,[p("div",dt,$((u=e.selectedItem)==null?void 0:u.location),1),p("div",mt,$((d=e.selectedItem)==null?void 0:d.cost.toLocaleString())+" PLN ",1),m(ae,{outline:"",color:"emerald",icon:"event"},{default:k(()=>{var s;return[R($((s=e.selectedItem)==null?void 0:s.date),1)]}),_:1}),m(ae,{outline:"",color:"terracotta",icon:"category"},{default:k(()=>{var s;return[R($((s=e.selectedItem)==null?void 0:s.type),1)]}),_:1}),p("div",vt,$((h=e.selectedItem)==null?void 0:h.description),1),m(A,{class:"btn-emerald full-width q-mt-xl q-py-md",label:"Zapytaj o ofert\u0119",onClick:o[6]||(o[6]=s=>e.$router.push("/kontakt")),rounded:"",unelevated:""})])])]}),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})}var Tt=Ce(tt,[["render",pt],["__scopeId","data-v-cdf544ee"]]);export{Tt as default};
