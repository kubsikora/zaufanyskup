import{aS as Be,E as ke,aT as xe,c as q,h as b,aU as Ve,g as oe,r as k,ap as ze,M as Fe,Y as Pe,H as Ie,J as De,aN as Ee,at as $e,bn as Ne,w as Re,U as Ae,f as Le,bl as Qe,bj as Te,aM as ce,aF as Me,Q as N,bi as Oe,_ as We,d as Ze,m as W,n as Z,p as _,j as p,aJ as Q,A as M,b4 as pe,q as He,t as me,aK as Ke,aL as ve,C as fe,bg as Xe,bm as ge,F as Ye,aI as Ge}from"./index.35a4ba6f.js";import{Q as he}from"./use-fullscreen.6d201c50.js";import{Q as Je}from"./QBadge.e4e97605.js";import{a as ea,Q as aa}from"./QTable.a6be4497.js";import{Q as be}from"./QSpace.8536ae5a.js";import{b as ta,h as ye}from"./format.780bc3b2.js";import{Q as oa}from"./QForm.a0f8778b.js";import{C as we}from"./ClosePopup.2cefbcc9.js";import{u as la}from"./use-quasar.5c0158c1.js";import{a as na}from"./axios.550fcdad.js";import"./QItem.2dcb7e13.js";import"./QMenu.4ab84bdf.js";import"./QList.071cb342.js";const sa={...Be,min:{type:Number,default:0},max:{type:Number,default:100},color:String,centerColor:String,trackColor:String,fontSize:String,rounded:Boolean,thickness:{type:Number,default:.2,validator:e=>e>=0&&e<=1},angle:{type:Number,default:0},showValue:Boolean,reverse:Boolean,instantFeedback:Boolean},te=50,qe=2*te,Se=qe*Math.PI,ia=Math.round(Se*1e3)/1e3;var ra=ke({name:"QCircularProgress",props:{...sa,value:{type:Number,default:0},animationSpeed:{type:[String,Number],default:600},indeterminate:Boolean},setup(e,{slots:o}){const{proxy:{$q:i}}=oe(),t=xe(e),u=q(()=>{const h=(i.lang.rtl===!0?-1:1)*e.angle;return{transform:e.reverse!==(i.lang.rtl===!0)?`scale3d(-1, 1, 1) rotate3d(0, 0, 1, ${-90-h}deg)`:`rotate3d(0, 0, 1, ${h-90}deg)`}}),v=q(()=>e.instantFeedback!==!0&&e.indeterminate!==!0?{transition:`stroke-dashoffset ${e.animationSpeed}ms ease 0s, stroke ${e.animationSpeed}ms ease`}:""),l=q(()=>qe/(1-e.thickness/2)),F=q(()=>`${l.value/2} ${l.value/2} ${l.value} ${l.value}`),U=q(()=>ta(e.value,e.min,e.max)),I=q(()=>e.max-e.min),j=q(()=>e.thickness/2*l.value),D=q(()=>{const h=(e.max-U.value)/I.value,a=e.rounded===!0&&U.value<e.max&&h<.25?j.value/2*(1-h/.25):0;return Se*h+a});function E({thickness:h,offset:a,color:w,cls:x,rounded:g}){return b("circle",{class:"q-circular-progress__"+x+(w!==void 0?` text-${w}`:""),style:v.value,fill:"transparent",stroke:"currentColor","stroke-width":h,"stroke-dasharray":ia,"stroke-dashoffset":a,"stroke-linecap":g,cx:l.value,cy:l.value,r:te})}return()=>{const h=[];e.centerColor!==void 0&&e.centerColor!=="transparent"&&h.push(b("circle",{class:`q-circular-progress__center text-${e.centerColor}`,fill:"currentColor",r:te-j.value/2,cx:l.value,cy:l.value})),e.trackColor!==void 0&&e.trackColor!=="transparent"&&h.push(E({cls:"track",thickness:j.value,offset:0,color:e.trackColor})),h.push(E({cls:"circle",thickness:j.value,offset:D.value,color:e.color,rounded:e.rounded===!0?"round":void 0}));const a=[b("svg",{class:"q-circular-progress__svg",style:u.value,viewBox:F.value,"aria-hidden":"true"},h)];return e.showValue===!0&&a.push(b("div",{class:"q-circular-progress__text absolute-full row flex-center content-center",style:{fontSize:e.fontSize}},o.default!==void 0?o.default():[b("div",U.value)])),b("div",{class:`q-circular-progress q-circular-progress--${e.indeterminate===!0?"in":""}determinate`,style:t.value,role:"progressbar","aria-valuemin":e.min,"aria-valuemax":e.max,"aria-valuenow":e.indeterminate===!0?void 0:U.value},Ve(o.internal,a))}}});function X(e,o,i,t){const u=[];return e.forEach(v=>{t(v)===!0?u.push(v):o.push({failedPropValidation:i,file:v})}),u}function J(e){e!=null&&e.dataTransfer&&(e.dataTransfer.dropEffect="copy"),Fe(e)}const ua={multiple:Boolean,accept:String,capture:String,maxFileSize:[Number,String],maxTotalSize:[Number,String],maxFiles:[Number,String],filter:Function},da=["rejected"];function ca({editable:e,dnd:o,getFileInput:i,addFilesToQueue:t}){const{props:u,emit:v,proxy:l}=oe(),F=k(null),U=q(()=>u.accept!==void 0?u.accept.split(",").map(s=>(s=s.trim(),s==="*"?"*/":(s.endsWith("/*")&&(s=s.slice(0,s.length-1)),s.toUpperCase()))):null),I=q(()=>parseInt(u.maxFiles,10)),j=q(()=>parseInt(u.maxTotalSize,10));function D(s){var C;if(e.value)if(s!==Object(s)&&(s={target:null}),((C=s.target)==null?void 0:C.matches('input[type="file"]'))===!0)s.clientX===0&&s.clientY===0&&ze(s);else{const B=i();B!==s.target&&(B==null||B.click(s))}}function E(s){e.value&&s&&t(null,s)}function h(s,C,B,A){let f=Array.from(C||s.target.files);const z=[],$=()=>{z.length!==0&&v("rejected",z)};if(u.accept!==void 0&&U.value.indexOf("*/")===-1&&(f=X(f,z,"accept",r=>U.value.some(c=>r.type.toUpperCase().startsWith(c)||r.name.toUpperCase().endsWith(c))),f.length===0))return $();if(u.maxFileSize!==void 0){const r=parseInt(u.maxFileSize,10);if(f=X(f,z,"max-file-size",c=>c.size<=r),f.length===0)return $()}if(u.multiple!==!0&&f.length!==0&&(f=[f[0]]),f.forEach(r=>{r.__key=r.webkitRelativePath+r.lastModified+r.name+r.size}),A===!0){const r=B.map(c=>c.__key);f=X(f,z,"duplicate",c=>r.includes(c.__key)===!1)}if(f.length===0)return $();if(u.maxTotalSize!==void 0){let r=A===!0?B.reduce((c,S)=>c+S.size,0):0;if(f=X(f,z,"max-total-size",c=>(r+=c.size,r<=j.value)),f.length===0)return $()}if(typeof u.filter=="function"){const r=u.filter(f);f=X(f,z,"filter",c=>r.includes(c))}if(u.maxFiles!==void 0){let r=A===!0?B.length:0;if(f=X(f,z,"max-files",()=>(r++,r<=I.value)),f.length===0)return $()}if($(),f.length!==0)return f}function a(s){J(s),o.value!==!0&&(o.value=!0)}function w(s){Fe(s),(s.relatedTarget!==null||Pe.is.safari!==!0?s.relatedTarget!==F.value:document.elementsFromPoint(s.clientX,s.clientY).includes(F.value)===!1)===!0&&(o.value=!1)}function x(s){J(s);const C=s.dataTransfer.files;C.length!==0&&t(null,C),o.value=!1}function g(s){if(o.value===!0)return b("div",{ref:F,class:`q-${s}__dnd absolute-full`,onDragenter:J,onDragover:J,onDragleave:w,onDrop:x})}return Object.assign(l,{pickFiles:D,addFiles:E}),{pickFiles:D,addFiles:E,onDragover:a,onDragleave:w,processFiles:h,getDndNode:g,maxFilesNumber:I,maxTotalSizeNumber:j}}function _e(e){return(e*100).toFixed(2)+"%"}const pa={...Ie,...ua,label:String,color:String,textColor:String,square:Boolean,flat:Boolean,bordered:Boolean,noThumbnails:Boolean,thumbnailFit:{type:String,default:"cover"},autoUpload:Boolean,hideUploadBtn:Boolean,disable:Boolean,readonly:Boolean},Ce=[...da,"start","finish","added","removed"];function ma(e,o){const i=oe(),{props:t,slots:u,emit:v,proxy:l}=i,{$q:F}=l,U=De(t,F);function I(n,y,V){if(n.__status=y,y==="idle"){n.__uploaded=0,n.__progress=0,n.__sizeLabel=ye(n.size),n.__progressLabel="0.00%";return}if(y==="failed"){l.$forceUpdate();return}n.__uploaded=y==="uploaded"?n.size:V,n.__progress=y==="uploaded"?1:Math.min(.9999,n.__uploaded/n.size),n.__progressLabel=_e(n.__progress),l.$forceUpdate()}const j=q(()=>t.disable!==!0&&t.readonly!==!0),D=k(!1),E=k(null),h=k(null),a={files:k([]),queuedFiles:k([]),uploadedFiles:k([]),uploadedSize:k(0),updateFileStatus:I,isAlive:()=>Ee(i)===!1},{pickFiles:w,addFiles:x,onDragover:g,onDragleave:s,processFiles:C,getDndNode:B,maxFilesNumber:A,maxTotalSizeNumber:f}=ca({editable:j,dnd:D,getFileInput:se,addFilesToQueue:ie});Object.assign(a,e({props:t,slots:u,emit:v,helpers:a,exposeApi:n=>{Object.assign(a,n)}})),a.isBusy===void 0&&(a.isBusy=k(!1));const z=k(0),$=q(()=>z.value===0?0:a.uploadedSize.value/z.value),r=q(()=>_e($.value)),c=q(()=>ye(z.value)),S=q(()=>j.value===!0&&a.isUploading.value!==!0&&(t.multiple===!0||a.queuedFiles.value.length===0)&&(t.maxFiles===void 0||a.files.value.length<A.value)&&(t.maxTotalSize===void 0||z.value<f.value)),d=q(()=>j.value===!0&&a.isBusy.value!==!0&&a.isUploading.value!==!0&&a.queuedFiles.value.length!==0);$e(Ne,ue);const m=q(()=>"q-uploader column no-wrap"+(U.value===!0?" q-uploader--dark q-dark":"")+(t.bordered===!0?" q-uploader--bordered":"")+(t.square===!0?" q-uploader--square no-border-radius":"")+(t.flat===!0?" q-uploader--flat no-shadow":"")+(t.disable===!0?" disabled q-uploader--disable":"")+(D.value===!0?" q-uploader--dnd":"")),R=q(()=>"q-uploader__header"+(t.color!==void 0?` bg-${t.color}`:"")+(t.textColor!==void 0?` text-${t.textColor}`:""));Re(a.isUploading,(n,y)=>{y===!1&&n===!0?v("start"):y===!0&&n===!1&&v("finish")});function H(){t.disable===!1&&(a.abort(),a.uploadedSize.value=0,z.value=0,ne(),a.files.value=[],a.queuedFiles.value=[],a.uploadedFiles.value=[])}function L(){t.disable===!1&&le(["uploaded"],()=>{a.uploadedFiles.value=[]})}function G(){le(["idle","failed"],({size:n})=>{z.value-=n,a.queuedFiles.value=[]})}function le(n,y){if(t.disable===!0)return;const V={files:[],size:0},T=a.files.value.filter(P=>n.indexOf(P.__status)===-1?!0:(V.size+=P.size,V.files.push(P),P.__img!==void 0&&window.URL.revokeObjectURL(P.__img.src),!1));V.files.length!==0&&(a.files.value=T,y(V),v("removed",V.files))}function ae(n){t.disable||(n.__status==="uploaded"?a.uploadedFiles.value=a.uploadedFiles.value.filter(y=>y.__key!==n.__key):n.__status==="uploading"?n.__abort():z.value-=n.size,a.files.value=a.files.value.filter(y=>y.__key!==n.__key?!0:(y.__img!==void 0&&window.URL.revokeObjectURL(y.__img.src),!1)),a.queuedFiles.value=a.queuedFiles.value.filter(y=>y.__key!==n.__key),v("removed",[n]))}function ne(){a.files.value.forEach(n=>{n.__img!==void 0&&window.URL.revokeObjectURL(n.__img.src)})}function se(){return h.value||E.value.getElementsByClassName("q-uploader__input")[0]}function ie(n,y){const V=C(n,y,a.files.value,!0),T=se();T!=null&&(T.value=""),V!==void 0&&(V.forEach(P=>{if(a.updateFileStatus(P,"idle"),z.value+=P.size,t.noThumbnails!==!0&&P.type.toUpperCase().startsWith("IMAGE")){const de=new Image;de.src=window.URL.createObjectURL(P),P.__img=de}}),a.files.value=a.files.value.concat(V),a.queuedFiles.value=a.queuedFiles.value.concat(V),v("added",V),t.autoUpload===!0&&a.upload())}function re(){d.value===!0&&a.upload()}function Y(n,y,V){if(n===!0){const T={type:"a",key:y,icon:F.iconSet.uploader[y],flat:!0,dense:!0};let P;return y==="add"?(T.onClick=w,P=ue):T.onClick=V,b(N,T,P)}}function ue(){return b("input",{ref:h,class:"q-uploader__input overflow-hidden absolute-full",tabindex:-1,type:"file",title:"",accept:t.accept,multiple:t.multiple===!0?"multiple":void 0,capture:t.capture,onMousedown:ze,onClick:w,onChange:ie})}function Ue(){return u.header!==void 0?u.header(K):[b("div",{class:"q-uploader__header-content column"},[b("div",{class:"flex flex-center no-wrap q-gutter-xs"},[Y(a.queuedFiles.value.length!==0,"removeQueue",G),Y(a.uploadedFiles.value.length!==0,"removeUploaded",L),a.isUploading.value===!0?b(ce,{class:"q-uploader__spinner"}):null,b("div",{class:"col column justify-center"},[t.label!==void 0?b("div",{class:"q-uploader__title"},[t.label]):null,b("div",{class:"q-uploader__subtitle"},[c.value+" / "+r.value])]),Y(S.value,"add"),Y(t.hideUploadBtn===!1&&d.value===!0,"upload",a.upload),Y(a.isUploading.value,"clear",a.abort)])])]}function je(){return u.list!==void 0?u.list(K):a.files.value.map(n=>b("div",{key:n.__key,class:"q-uploader__file relative-position"+(t.noThumbnails!==!0&&n.__img!==void 0?" q-uploader__file--img":"")+(n.__status==="failed"?" q-uploader__file--failed":n.__status==="uploaded"?" q-uploader__file--uploaded":""),style:t.noThumbnails!==!0&&n.__img!==void 0?{backgroundImage:'url("'+n.__img.src+'")',backgroundSize:t.thumbnailFit}:null},[b("div",{class:"q-uploader__file-header row flex-center no-wrap"},[n.__status==="failed"?b(Me,{class:"q-uploader__file-status",name:F.iconSet.type.negative,color:"negative"}):null,b("div",{class:"q-uploader__file-header-content col"},[b("div",{class:"q-uploader__title"},[n.name]),b("div",{class:"q-uploader__subtitle row items-center no-wrap"},[n.__sizeLabel+" / "+n.__progressLabel])]),n.__status==="uploading"?b(ra,{value:n.__progress,min:0,max:1,indeterminate:n.__progress===0}):b(N,{round:!0,dense:!0,flat:!0,icon:F.iconSet.uploader[n.__status==="uploaded"?"done":"clear"],onClick:()=>{ae(n)}})])]))}Ae(()=>{a.isUploading.value===!0&&a.abort(),a.files.value.length!==0&&ne()});const K={};for(const n in a)Le(a[n])===!0?Qe(K,n,()=>a[n].value):K[n]=a[n];return Object.assign(K,{upload:re,reset:H,removeUploadedFiles:L,removeQueuedFiles:G,removeFile:ae,pickFiles:w,addFiles:x}),Te(K,{canAddFiles:()=>S.value,canUpload:()=>d.value,uploadSizeLabel:()=>c.value,uploadProgressLabel:()=>r.value}),o({...a,upload:re,reset:H,removeUploadedFiles:L,removeQueuedFiles:G,removeFile:ae,pickFiles:w,addFiles:x,canAddFiles:S,canUpload:d,uploadSizeLabel:c,uploadProgressLabel:r}),()=>{const n=[b("div",{class:R.value},Ue()),b("div",{class:"q-uploader__list scroll"},je()),B("uploader")];a.isBusy.value===!0&&n.push(b("div",{class:"q-uploader__overlay absolute-full flex flex-center"},[b(ce)]));const y={ref:E,class:m.value};return S.value===!0&&Object.assign(y,{onDragover:g,onDragleave:s}),b("div",y,n)}}const va=()=>!0;function fa(e){const o={};return e.forEach(i=>{o[i]=va}),o}const ga=fa(Ce);var ha=({name:e,props:o,emits:i,injectPlugin:t})=>ke({name:e,props:{...pa,...o},emits:Oe(i)===!0?{...ga,...i}:[...Ce,...i],setup(u,{expose:v}){return ma(t,v)}});function O(e){return typeof e=="function"?e:()=>e}const ba="QUploader",ya={url:[Function,String],method:{type:[Function,String],default:"POST"},fieldName:{type:[Function,String],default:()=>e=>e.name},headers:[Function,Array],formFields:[Function,Array],withCredentials:[Function,Boolean],sendRaw:[Function,Boolean],batch:[Function,Boolean],factory:Function},wa=["factoryFailed","uploaded","failed","uploading"];function _a({props:e,emit:o,helpers:i}){const t=k([]),u=k([]),v=k(0),l=q(()=>({url:O(e.url),method:O(e.method),headers:O(e.headers),formFields:O(e.formFields),fieldName:O(e.fieldName),withCredentials:O(e.withCredentials),sendRaw:O(e.sendRaw),batch:O(e.batch)})),F=q(()=>v.value>0),U=q(()=>u.value.length!==0);let I;function j(){t.value.forEach(a=>{a.abort()}),u.value.length!==0&&(I=!0)}function D(){const a=i.queuedFiles.value.slice(0);i.queuedFiles.value=[],l.value.batch(a)?E(a):a.forEach(w=>{E([w])})}function E(a){if(v.value++,typeof e.factory!="function"){h(a,{});return}const w=e.factory(a);if(!w)o("factoryFailed",new Error("QUploader: factory() does not return properly"),a),v.value--;else if(typeof w.catch=="function"&&typeof w.then=="function"){u.value.push(w);const x=g=>{i.isAlive()===!0&&(u.value=u.value.filter(s=>s!==w),u.value.length===0&&(I=!1),i.queuedFiles.value=i.queuedFiles.value.concat(a),a.forEach(s=>{i.updateFileStatus(s,"failed")}),o("factoryFailed",g,a),v.value--)};w.then(g=>{I===!0?x(new Error("Aborted")):i.isAlive()===!0&&(u.value=u.value.filter(s=>s!==w),h(a,g))}).catch(x)}else h(a,w||{})}function h(a,w){const x=new FormData,g=new XMLHttpRequest,s=(d,m)=>w[d]!==void 0?O(w[d])(m):l.value[d](m),C=s("url",a);if(!C){console.error("q-uploader: invalid or no URL specified"),v.value--;return}const B=s("formFields",a);B!==void 0&&B.forEach(d=>{x.append(d.name,d.value)});let A=0,f=0,z=0,$=0,r;g.upload.addEventListener("progress",d=>{if(r===!0)return;const m=Math.min($,d.loaded);i.uploadedSize.value+=m-z,z=m;let R=z-f;for(let H=A;R>0&&H<a.length;H++){const L=a[H];if(R>L.size)R-=L.size,A++,f+=L.size,i.updateFileStatus(L,"uploading",L.size);else{i.updateFileStatus(L,"uploading",R);return}}},!1),g.onreadystatechange=()=>{g.readyState<4||(g.status&&g.status<400?(i.uploadedFiles.value=i.uploadedFiles.value.concat(a),a.forEach(d=>{i.updateFileStatus(d,"uploaded")}),o("uploaded",{files:a,xhr:g})):(r=!0,i.uploadedSize.value-=z,i.queuedFiles.value=i.queuedFiles.value.concat(a),a.forEach(d=>{i.updateFileStatus(d,"failed")}),o("failed",{files:a,xhr:g})),v.value--,t.value=t.value.filter(d=>d!==g))},g.open(s("method",a),C),s("withCredentials",a)===!0&&(g.withCredentials=!0);const c=s("headers",a);c!==void 0&&c.forEach(d=>{g.setRequestHeader(d.name,d.value)});const S=s("sendRaw",a);a.forEach(d=>{i.updateFileStatus(d,"uploading",0),S!==!0&&x.append(s("fieldName",d),d,d.name),d.xhr=g,d.__abort=()=>{g.abort()},$+=d.size}),o("uploading",{files:a,xhr:g}),t.value.push(g),S===!0?g.send(new Blob(a)):g.send(x)}return{isUploading:F,isBusy:U,abort:j,upload:D}}var ka={name:ba,props:ya,emits:wa,injectPlugin:_a},za=ha(ka);const ee=na.create({baseURL:"http://localhost:8000/",withCredentials:!0}),Fa=Ze({name:"IndexPage",setup(){const e=k({name:"",prodCode:"",price_min:null,price_max:null,type:""}),o=k({name:"",prodCode:"",price_min:null,price_max:null,type:""}),i=k({type:"",name:"",price:0,dimensions:"",material:"",prodCode:"",active:!0,description:"",photos:[]}),t=la(),u=k(!1),v=k(!1),l=k(!1),F=k(5),U=k(1),I=k(1),j=k(1),D=k({sortBy:"desc",descending:!1,page:U.value,rowsPerPage:F.value,rowsNumber:j.value}),E=[{name:"name",label:"Nazwa",field:"name",align:"left",sortable:!0},{name:"type",label:"Typ",field:"type",align:"left"},{name:"price",label:"Cena",field:"price",align:"right",format:r=>`${r} z\u0142`},{name:"material",label:"Materia\u0142",field:"material",align:"left"},{name:"prodCode",label:"Lokalizacja",field:"prodCode",align:"left"},{name:"active",label:"Aktywny",field:"active",align:"left",format:r=>r?"Tak":"Nie"},{name:"photos",label:"Zdj\u0119cia",field:"photos",align:"center"}],h=k([]),a=r=>{i.value.photos=[...i.value.photos,...r]},w=(r,c)=>{v.value=!0,i.value=c,u.value=!0},x=()=>{t.dialog({title:"Potwierdzenie",message:"Czy na pewno chcesz co\u015B usun\u0105\u0107?",cancel:!0,persistent:!0}).onOk(()=>{B()}).onCancel(()=>{t.notify({type:"info",message:"Anulowano!"})})},g=()=>{i.value={type:"",name:"",price:0,dimensions:"",material:"",prodCode:"",active:!0,description:"",photos:[]},v.value=!1,u.value=!0},s=async()=>{t.loading.show();const r=v.value?"update":"store";try{const c=localStorage.getItem("token"),S=new FormData;if(Object.keys(i.value).forEach(m=>{if(m!=="photos"){const R=i.value[m];S.append(m,R!==null?String(R):"")}}),i.value.photos&&i.value.photos.length>0){for(const m of i.value.photos)if(m instanceof File){if(m.size>10*1024*1024){t.notify({color:"negative",message:`Plik ${m.name} jest za du\u017Cy!`}),t.loading.hide();return}S.append("photos[]",m)}}v.value&&i.value.id&&S.append("id",String(i.value.id));const d=await ee.post("/api/products/"+r,S,{headers:{Authorization:`Bearer ${c}`,Accept:"application/json","Content-Type":"multipart/form-data"}});if(d.status===201||d.status===200){if(t.notify({color:"positive",message:"Sukces!",icon:"check"}),v.value){const m=h.value.findIndex(R=>R.id===i.value.id);h.value[m]=d.data}else h.value.push(d.data);i.value={type:"",name:"",price:0,dimensions:"",material:"",active:!0,prodCode:"",description:"",photos:[]},u.value=!1}}catch{t.notify({color:"negative",message:"B\u0142\u0105d zapisu",icon:"error"})}finally{t.loading.hide()}},C=async(r=null)=>{t.loading.show();let c=1,S=5;r&&(c=r.pagination.page||U.value||1,S=r.pagination.rowsPerPage||F.value||5);try{const d=localStorage.getItem("token"),m=await ee.get("/api/products/index",{params:{...e.value,page:c,per_page:S},withCredentials:!0,headers:{Authorization:`Bearer ${d}`,Accept:"application/json"}});m.status===201||m.status===200?(h.value=m.data.data,F.value=m.data.per_page,U.value=m.data.current_page,I.value=m.data.last_page,j.value=m.data.total,D.value={...D.value,page:m.data.current_page,rowsPerPage:m.data.per_page,rowsNumber:m.data.total},t.loading.hide()):(t.loading.hide(),t.notify({color:"negative",message:"Element nie zosta\u0142 pobrane pomy\u015Blnie",icon:"error"}))}catch{t.loading.hide(),t.notify({color:"negative",message:"B\u0142\u0105d pobierania element\xF3w",icon:"error"})}},B=async()=>{t.loading.show();try{const r=localStorage.getItem("token"),c=await ee.post("/api/products/destroy",{...i.value},{withCredentials:!0,headers:{Authorization:`Bearer ${r}`,Accept:"application/json"}});c.status===201||c.status===200?(t.loading.hide(),C(),u.value=!1,t.notify({color:"positive",message:"Element zosta\u0142 usuniety",icon:"error"})):(t.loading.hide(),t.notify({color:"negative",message:"Element nie zosta\u0142 usuni\u0119ty pomy\u015Blnie",icon:"error"}))}catch{t.loading.hide(),t.notify({color:"negative",message:"B\u0142\u0105d usuwania elementu",icon:"error"})}},A=async r=>{t.loading.show();try{const c=localStorage.getItem("token"),S=await ee.post("/api/productpicture/destroy",{path:r},{withCredentials:!0,headers:{Authorization:`Bearer ${c}`,Accept:"application/json"}});S.status===201||S.status===200?(t.loading.hide(),C(),t.notify({color:"positive",message:"Element zosta\u0142 usuniety",icon:"error"}),i.value.photos=i.value.photos.filter(d=>{const m=d;return m.path?m.path!==r:!0})):(t.loading.hide(),t.notify({color:"negative",message:"Element nie zosta\u0142 usuni\u0119ty pomy\u015Blnie",icon:"error"}))}catch{t.loading.hide(),t.notify({color:"negative",message:"B\u0142\u0105d usuwania",icon:"error"})}},f=()=>{e.value=o.value,C()},z=r=>r.path||"",$=r=>{r.forEach(c=>{t.notify({type:"negative",message:`Plik ${c.file.name} zosta\u0142 odrzucony: ${c.failedPropValidation==="max-file-size"?"Za du\u017Cy rozmiar (max 10MB)":"B\u0142\u0119dny format"}`})})};return C(),{items:h,onRejected:$,cleanSearch:f,Emptysearch:o,search:e,pagination:D,prepertable:C,columns:E,showAddDialog:u,drop:x,newItem:i,handleSubmit:s,dropPicture:A,isEditMode:v,handleFileUpload:a,getPath:z,addNew:g,handleRowDblClick:w,dropElement:B,photosDialog:l,per_page:F,current_page:U,last_page:I,total:j}}}),qa={class:"q-pa-xl"},Sa={class:"row bg-blue-4 text-white q-pa-sm q-mb-md",style:{"border-radius":"8px"}},Ca={class:"col-9"},Ua={class:"row"},ja={class:"row q-pr-lg"},Ba={class:"col-3"},xa={class:"row q-pt-xs"},Va={key:0,class:"text-h6 col-4"},Pa={key:1,class:"text-h6 col-4"},Ia={class:"col-12 col-sm-6"},Da={class:"col-12 col-sm-6"},Ea={class:"col-12 col-sm-6"},$a={class:"col-12 col-sm-6"},Na={class:"col-12 col-sm-6"},Ra={class:"col-12 col-sm-6"},Aa={class:"col-12"},La={class:"col-12"},Qa={key:0,class:"col-12"},Ta={class:"col-12"},Ma={class:"text-subtitle2 q-mb-sm"},Oa={class:"col-12 row justify-end q-mt-md"},Wa={class:"row bg-white",style:{width:"1000px"}},Za={class:"col-12"},Ha={class:"row bg-blue-4"},Ka={class:"col-12"},Xa={class:"row",style:{overflow:"auto"}},Ya={class:"row q-pa-xs rounded-borders",style:{border:"1px solid rgba(0, 0, 0, 0.2)",overflow:"hidden"}},Ga={class:"col-12"},Ja=["src"];function et(e,o,i,t,u,v){return W(),Z("div",qa,[o[22]||(o[22]=_("div",{class:"row items-center justify-between q-mb-md"},[_("div",{class:"text-h5"},"Zarz\u0105dzanie Produktami")],-1)),_("div",Sa,[_("div",Ca,[_("div",Ua,[p(Q,{modelValue:e.search.name,"onUpdate:modelValue":o[0]||(o[0]=l=>e.search.name=l),label:"Nazwa",round:"",outlined:"",dense:"",class:"col q-ma-xs rounded-borders bg-white"},null,8,["modelValue"]),p(Q,{modelValue:e.search.prodCode,"onUpdate:modelValue":o[1]||(o[1]=l=>e.search.prodCode=l),label:"Lokalizacja",round:"",outlined:"",dense:"",class:"col q-ma-xs rounded-borders bg-white"},null,8,["modelValue"]),p(he,{options:["Mieszkanie","Dom","Dzia\u0142ka","Udzia\u0142y"],modelValue:e.search.type,"onUpdate:modelValue":o[2]||(o[2]=l=>e.search.type=l),label:"Typ",round:"",outlined:"",dense:"",class:"col q-ma-xs rounded-borders bg-white"},null,8,["modelValue"])]),_("div",ja,[p(Q,{modelValue:e.search.price_min,"onUpdate:modelValue":o[3]||(o[3]=l=>e.search.price_min=l),type:"number",label:"Kwota (od)",round:"",outlined:"",dense:"",class:"col-4 q-ma-xs rounded-borders bg-white"},null,8,["modelValue"]),p(Q,{modelValue:e.search.price_max,"onUpdate:modelValue":o[4]||(o[4]=l=>e.search.price_max=l),type:"number",label:"Kwota (do)",round:"",outlined:"",dense:"",class:"col-4 q-ma-xs rounded-borders bg-white"},null,8,["modelValue"])])]),_("div",Ba,[_("div",xa,[p(N,{icon:"close",class:"col-12 q-mb-xs bg-blue-4",unelevated:"",style:{border:"1px solid white"},label:"Wyczy\u015B\u0107",onClick:o[5]||(o[5]=l=>e.cleanSearch())}),p(N,{icon:"search",class:"bg-white text-blue-4 col-12 q-mb-xs",unelevated:"",style:{border:"1px solid white"},label:"Szukaj",onClick:o[6]||(o[6]=l=>e.prepertable())}),p(N,{unelevated:"",class:"bg-blue-6 text-white col-12",icon:"add",label:"Dodaj nowy element",onClick:o[7]||(o[7]=l=>e.addNew())})])])]),p(ea,{rows:e.items,columns:e.columns,"row-key":"id",flat:"",bordered:"","no-data-label":"Brak element\xF3w w bazie",onRowDblclick:e.handleRowDblClick,pagination:e.pagination,"onUpdate:pagination":o[8]||(o[8]=l=>e.pagination=l),onRequest:e.prepertable},{"body-cell-photos":M(l=>[p(aa,{props:l},{default:M(()=>[p(Je,{color:"blue"},{default:M(()=>{var F;return[He(me(((F=l.row.photos)==null?void 0:F.length)||0)+" zdj. ",1)]}),_:2},1024)]),_:2},1032,["props"])]),_:1},8,["rows","columns","onRowDblclick","pagination","onRequest"]),p(pe,{modelValue:e.showAddDialog,"onUpdate:modelValue":o[19]||(o[19]=l=>e.showAddDialog=l),persistent:"","max-width":"800px"},{default:M(()=>[p(Ke,{style:{"min-width":"400px",width:"70vw"}},{default:M(()=>[p(ve,{class:"row q-pb-sm bg-blue-2 items-center q-pb-none"},{default:M(()=>[e.isEditMode?(W(),Z("div",Pa,"Edycja elementu")):(W(),Z("div",Va,"Nowy Element")),p(be),fe(p(N,{class:"col-1",icon:"close",flat:"",round:"",dense:""},null,512),[[we]])]),_:1}),p(ve,{class:"q-pt-md"},{default:M(()=>[p(oa,{onSubmit:e.handleSubmit,class:"row q-col-gutter-md"},{default:M(()=>[_("div",Ia,[p(he,{options:["Mieszkanie","Dom","Dzia\u0142ka","Udzia\u0142y"],modelValue:e.newItem.type,"onUpdate:modelValue":o[9]||(o[9]=l=>e.newItem.type=l),label:"Typ",outlined:"",dense:"",required:""},null,8,["modelValue"])]),_("div",Da,[p(Q,{modelValue:e.newItem.name,"onUpdate:modelValue":o[10]||(o[10]=l=>e.newItem.name=l),label:"Nazwa",outlined:"",dense:"",required:""},null,8,["modelValue"])]),_("div",Ea,[p(Q,{modelValue:e.newItem.price,"onUpdate:modelValue":o[11]||(o[11]=l=>e.newItem.price=l),modelModifiers:{number:!0},type:"number",label:"Cena (PLN)",outlined:"",dense:"",suffix:"z\u0142"},null,8,["modelValue"])]),_("div",$a,[p(Q,{modelValue:e.newItem.prodCode,"onUpdate:modelValue":o[12]||(o[12]=l=>e.newItem.prodCode=l),label:"Lokalizacja",outlined:"",dense:""},null,8,["modelValue"])]),_("div",Na,[p(Q,{modelValue:e.newItem.dimensions,"onUpdate:modelValue":o[13]||(o[13]=l=>e.newItem.dimensions=l),label:"Wymiary (np. 100x50x20)",outlined:"",dense:""},null,8,["modelValue"])]),_("div",Ra,[p(Q,{modelValue:e.newItem.material,"onUpdate:modelValue":o[14]||(o[14]=l=>e.newItem.material=l),label:"Materia\u0142",outlined:"",dense:""},null,8,["modelValue"])]),_("div",Aa,[p(Q,{modelValue:e.newItem.description,"onUpdate:modelValue":o[15]||(o[15]=l=>e.newItem.description=l),type:"textarea",label:"Opis produktu",outlined:"",dense:""},null,8,["modelValue"])]),_("div",La,[p(Xe,{modelValue:e.newItem.active,"onUpdate:modelValue":o[16]||(o[16]=l=>e.newItem.active=l),label:"Czy ustawi\u0107 widoczno\u015B\u0107?",outlined:"",dense:""},null,8,["modelValue"])]),e.newItem.photos.length>0?(W(),Z("div",Qa,[p(N,{unelevated:"",class:"bg-blue-5 text-white",onClick:o[17]||(o[17]=l=>e.photosDialog=!e.photosDialog),label:"Edytuj ju\u017C dodane zdj\u0119cia"})])):ge("",!0),_("div",Ta,[_("div",Ma,me(e.isEditMode?"Dodaj nowe zdj\u0119cia":"Zdj\u0119cia produktu"),1),p(za,{multiple:"",batch:"",flat:"",bordered:"",style:{width:"100%"},label:"Przeci\u0105gnij zdj\u0119cia lub kliknij + (Max 10MB)",accept:".jpg, .png, image/*","max-file-size":10485760,onAdded:e.handleFileUpload,onRejected:e.onRejected},null,8,["onAdded","onRejected"])]),_("div",Oa,[fe(p(N,{label:"Anuluj",flat:""},null,512),[[we]]),p(N,{flat:"",style:{border:"1px solid rgb(25, 118, 210)"},unelevated:"",label:"Usu\u0144 element",color:"primary",onClick:o[18]||(o[18]=l=>e.drop()),class:"q-ml-sm"}),p(N,{unelevated:"",label:"Zapisz element",color:"primary",type:"submit",class:"q-ml-sm"})])]),_:1},8,["onSubmit"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),p(pe,{modelValue:e.photosDialog,"onUpdate:modelValue":o[21]||(o[21]=l=>e.photosDialog=l)},{default:M(()=>[_("div",Wa,[_("div",Za,[_("div",Ha,[p(be),p(N,{onClick:o[20]||(o[20]=l=>e.photosDialog=!e.photosDialog),icon:"close",round:"",dense:"",flat:"",class:"text-white"})])]),_("div",Ka,[_("div",Xa,[(W(!0),Z(Ye,null,Ge(e.newItem.photos,(l,F)=>(W(),Z("div",{class:"col-4 q-pa-md",key:F},[_("div",Ya,[_("div",Ga,[l&&l.path?(W(),Z("img",{key:0,src:`http://localhost:8000/storage/${e.getPath(l)}`,style:{width:"7.8vw",height:"auto"}},null,8,Ja)):ge("",!0)]),p(N,{class:"col-12 text-red",label:"usu\u0144",icon:"close",dense:"",unelevated:"",flat:"",onClick:U=>e.dropPicture(e.getPath(l))},null,8,["onClick"])])]))),128))])])])]),_:1},8,["modelValue"])])}var vt=We(Fa,[["render",et]]);export{vt as default};
